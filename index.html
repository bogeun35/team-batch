AuctionTimer();
                        autoAssignRemaining();
                    } else {
                        showAuctionModal();
                    }
                } else {
                    stopAuctionTimer();
                    alert('üéâ Í≤ΩÎß§ Ï¢ÖÎ£å!');
                    closeAuction();
                }
            }, 1000);
        }

        function autoAssignRemaining() {
            const remainingPlayers = auctionPlayers.slice(currentAuctionIndex);
            const targetTeam = team1Points === 0 ? 2 : 1;
            
            remainingPlayers.forEach(player => {
                addPlayerToTeam(player, targetTeam);
                removeFromSpectators(player);
            });
            
            alert(`üéâ Í≤ΩÎß§ Ï¢ÖÎ£å! ÎÇ®ÏùÄ ÏÑ†ÏàòÎäî ${targetTeam}ÌåÄÏóê Î∞∞Ï†ïÎêòÏóàÏäµÎãàÎã§.`);
            closeAuction();
        }

        function addPlayerToTeam(player, team) {
            const teamSlots = team === 1 ? 
                document.querySelectorAll('#team1 .team-slot') : 
                document.querySelectorAll('#team2 .team-slot');
            
            for (let slot of teamSlots) {
                if (slot.classList.contains('empty') || !slot.querySelector('.player-card')) {
                    slot.innerHTML = '';
                    slot.classList.remove('empty');
                    const card = createPlayerCard(player);
                    slot.appendChild(card);
                    break;
                }
            }
            
            const team1Players = getTeamPlayers(1);
            const team2Players = getTeamPlayers(2);
            
            if (team === 1 && team1Players.length > 0 && !team1CaptainName) {
                const captain = team1Players.sort((a, b) => b.tier - a.tier)[0];
                team1CaptainName = captain.name;
            }
            
            if (team === 2 && team2Players.length > 0 && !team2CaptainName) {
                const captain = team2Players.sort((a, b) => b.tier - a.tier)[0];
                team2CaptainName = captain.name;
            }
            
            const team1MembersList = team1Players.map(p => `${p.name}(${p.tier})`).join(', ');
            const team2MembersList = team2Players.map(p => `${p.name}(${p.tier})`).join(', ');
            
            document.getElementById('auctionTeam1Members').textContent = team1Players.length > 0 ? team1MembersList : 'Íµ¨ÏÑ±Ïõê ÏóÜÏùå';
            document.getElementById('auctionTeam2Members').textContent = team2Players.length > 0 ? team2MembersList : 'Íµ¨ÏÑ±Ïõê ÏóÜÏùå';
            
            document.getElementById('auctionTeam1Captain').textContent = `ÌåÄÏû•: ${team1CaptainName || '-'}`;
            document.getElementById('auctionTeam2Captain').textContent = `ÌåÄÏû•: ${team2CaptainName || '-'}`;
            
            updateTeamScores();
            updateSavedPlayersUI();
            updateSidebarLists();
        }

        function closeAuction() {
            stopAuctionTimer();
            document.getElementById('auctionModal').classList.remove('active');
        }

        function assignPlayersToTeams(players, teamSize) {
            const team1Slots = document.querySelectorAll('#team1 .team-slot');
            const team2Slots = document.querySelectorAll('#team2 .team-slot');
            
            let index = 0;
            
            for (let i = 0; i < teamSize && index < players.length; i++) {
                team1Slots[i].innerHTML = '';
                team1Slots[i].classList.remove('empty');
                const card = createPlayerCard(players[index]);
                team1Slots[i].appendChild(card);
                index++;
            }
            
            for (let i = 0; i < teamSize && index < players.length; i++) {
                team2Slots[i].innerHTML = '';
                team2Slots[i].classList.remove('empty');
                const card = createPlayerCard(players[index]);
                team2Slots[i].appendChild(card);
                index++;
            }
            
            updateTeamScores();
        }

        function clearTeams() {
            const team1Slots = document.querySelectorAll('#team1 .team-slot');
            const team2Slots = document.querySelectorAll('#team2 .team-slot');
            
            [...team1Slots, ...team2Slots].forEach(slot => {
                slot.innerHTML = '';
                slot.classList.add('empty');
            });
            
            updateTeamScores();
        }

        function clearAll() {
            clearTeams();
            
            const spectatorsGrid = document.getElementById('spectatorsGrid');
            spectatorsGrid.innerHTML = '';
            
            team1Points = 100;
            team2Points = 100;
            document.getElementById('team1Points').textContent = '100P';
            document.getElementById('team2Points').textContent = '100P';
            
            updateSpectatorCount();
            updateSavedPlayersUI();
            updateTeamSlots();
            updateSidebarLists();
        }

        init();
    </script>
</body>
</html>
